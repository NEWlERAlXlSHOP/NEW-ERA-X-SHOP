<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEW ERA X - PUBG Shop & Assistant</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* Все стили из магазина PUBG */
        body {
            font-family: 'Oswald', sans-serif;
            background-color: #0d0d0d;
            color: #f0f0f0;
        }
        
        /* Все остальные стили магазина... */
        
        /* Стили чат-ассистента */
        .chat-container {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            height: 500px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            background: rgba(10, 0, 30, 0.9);
            border: 2px solid #ff00ff;
            border-radius: 1rem;
            box-shadow: 0 0 30px rgba(255, 0, 255, 0.5);
            backdrop-filter: blur(10px);
            transform: translateY(150%);
            transition: transform 0.3s ease-out;
        }
        
        .chat-container.open {
            transform: translateY(0);
        }
        
        /* Остальные стили чат-ассистента... */
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Весь HTML код магазина PUBG -->
    
    <!-- Добавляем чат-ассистент в конец body -->
    <div id="chatContainer" class="chat-container">
        <div class="chat-header bg-gradient-to-r from-pink-500 to-cyan-400 p-3 text-center font-bold text-black">
            NEW ERA X ASSISTANT
        </div>
        <div id="chatMessages" class="flex-grow p-3 overflow-y-auto">
            <!-- Сообщения будут здесь -->
        </div>
        <div class="chat-input flex p-3 border-t border-pink-500 bg-gray-900">
            <textarea id="userInput" class="flex-grow p-2 rounded-lg bg-gray-800 text-white" placeholder="Напишите сообщение..."></textarea>
            <button id="sendButton" class="ml-2 w-10 h-10 flex items-center justify-center rounded-full bg-gradient-to-r from-pink-500 to-cyan-400 text-black">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Иконка для открытия чата -->
    <div class="fixed bottom-8 right-8 z-50">
        <button id="toggleChat" class="w-14 h-14 rounded-full bg-gradient-to-r from-pink-500 to-cyan-400 flex items-center justify-center text-2xl text-black shadow-lg hover:shadow-xl transition-all">
            <i class="fas fa-robot"></i>
        </button>
    </div>

    <script>
        // Весь JavaScript код магазина PUBG
        
        // Код чат-ассистента
        const chatContainer = document.getElementById('chatContainer');
        const toggleChat = document.getElementById('toggleChat');
        const chatMessages = document.getElementById('chatMessages');
        const userInput = document.getElementById('userInput');
        const sendButton = document.getElementById('sendButton');
        
        // Показать/скрыть чат
        toggleChat.addEventListener('click', () => {
            chatContainer.classList.toggle('open');
            
            // Первое сообщение при открытии
            if (chatContainer.classList.contains('open') {
                if (chatMessages.children.length === 0) {
                    appendMessage("Привет! Я ваш ассистент NEW ERA X. Чем могу помочь?", 'ai');
                }
            }
        });
        
        // Функция для добавления сообщений
        function appendMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `mb-2 p-3 rounded-lg max-w-[80%] ${
                sender === 'user' 
                    ? 'bg-pink-500 ml-auto text-black' 
                    : 'bg-cyan-400 mr-auto text-black'
            }`;
            messageDiv.textContent = text;
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        // Отправка сообщения
        sendButton.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });
        
        function sendMessage() {
            const message = userInput.value.trim();
            if (message) {
                appendMessage(message, 'user');
                userInput.value = '';
                
                // Здесь будет логика обработки сообщения и ответа AI
                setTimeout(() => {
                    appendMessage("Это демо-версия ассистента. В реальной версии здесь будет интеграция с AI API.", 'ai');
                }, 1000);
            }
        }
        
        // Интеграция с магазином
        // Например, можно добавить кнопки в чат для быстрого доступа к разделам магазина
    </script>
</body>
</html> // Вместо демо-ответа в функции sendMessage():
async function sendMessage() {
    const message = userInput.value.trim();
    if (message) {
        appendMessage(message, 'user');
        userInput.value = '';
        
        // Показать индикатор загрузки
        const loadingMsg = appendMessage("Думаю...", 'ai');
        
        try {
            const response = await fetchAIResponse(message);
            // Удалить индикатор загрузки
            chatMessages.removeChild(loadingMsg);
            appendMessage(response, 'ai');
        } catch (error) {
            appendMessage("Извините, произошла ошибка. Пожалуйста, попробуйте позже.", 'ai');
        }
    }
}

async function fetchAIResponse(prompt) {
    // Реальная интеграция с API AI
    const API_KEY = "YOUR_API_KEY";
    const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`;
    
    const response = await fetch(API_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
            contents: [{
                parts: [{ text: prompt }]
            }]
        })
    });
    
    const data = await response.json();
    return data.candidates[0].content.parts[0].text;
}
